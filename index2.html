<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è–èª•å¿«æ¨‚ï¼</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Fredoka+One&display=swap');

        :root {
            --bg-color: #fcf8e8;
            --box-color: #d64045;
            --ribbon-color: #f7b232;
            --text-color: #4a4a4a;
            --card-bg: #fff;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", sans-serif; /* iPhone å„ªå…ˆå­—é«” */
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            flex-direction: column;
            /* ç§»é™¤æ‰‹æ©Ÿé»æ“Šæ™‚çš„è—è‰²/ç°è‰²é«˜äº®å€å¡Š */
            -webkit-tap-highlight-color: transparent;
        }

        /* --- ç¦®ç‰©ç›’å€åŸŸ --- */
        .gift-wrapper {
            position: relative;
            z-index: 20;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        /* æŒ‰ä¸‹æ™‚ç¨å¾®ç¸®å°ï¼Œå¢åŠ æ‰‹æ„Ÿ */
        .gift-wrapper:active { transform: scale(0.95); }

        .box-body {
            width: 200px;
            height: 150px;
            background-color: var(--box-color);
            border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            position: relative;
            margin-top: -1px; /* ä¿®è£œç¸«éš™ */
        }

        .box-lid {
            width: 220px;
            height: 50px;
            background-color: #c43237;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            left: -10px;
            z-index: 2;
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        /* ç·å¸¶è£é£¾ */
        .ribbon-vertical {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 100%;
            background-color: var(--ribbon-color);
        }
        .ribbon-horizontal {
            position: absolute;
            top: 45%;
            width: 100%;
            height: 20px;
            background-color: var(--ribbon-color);
        }

        /* æç¤ºæ–‡å­— */
        .click-hint {
            margin-top: 60px;
            color: #888;
            font-size: 14px;
            animation: bounce 2s infinite;
            pointer-events: none; /* è®“é»æ“Šç©¿é€ */
        }

        /* --- å…¨è¢å¹•é®ç½©èˆ‡å¡ç‰‡ --- */
        .overlay-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); /* èƒŒæ™¯è®Šæš—ä¸€é»ï¼Œè®“å¡ç‰‡æ›´çªå‡º */
            opacity: 0;
            pointer-events: none; /* æœªé¡¯ç¤ºæ™‚ä¸æ“‹ä½æ“ä½œ */
            transition: opacity 0.5s;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px); /* iPhone æ”¯æ´çš„æ¯›ç»ç’ƒæ•ˆæœ */
            -webkit-backdrop-filter: blur(5px);
        }

        .card {
            width: 80%;
            max-width: 400px;
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            border: 4px solid #f7b232;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            transform: scale(0.8) translateY(50px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-height: 80vh;
            overflow-y: auto; /* å…§å®¹å¤šå¯æ»‘å‹• */
            position: relative;
        }

        /* å•Ÿå‹•ç‹€æ…‹ */
        .open .box-lid {
            transform: translateY(-120px) rotate(-10deg);
        }

        .overlay-container.active {
            opacity: 1;
            pointer-events: auto; /* é¡¯ç¤ºå¾Œå¯ä»¥é»æ“Š */
        }
        
        .overlay-container.active .card {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        /* å…§å®¹æ¨£å¼ */
        h1 { color: var(--box-color); font-family: 'Fredoka One', cursive; font-size: 26px; margin: 0 0 10px 0; text-align: center; }
        h2 { font-size: 16px; color: #666; margin-bottom: 20px; font-weight: normal; text-align: center; }
        p { line-height: 1.8; color: var(--text-color); font-size: 16px; margin-bottom: 15px; }
        .highlight { background-color: #fdf2d0; padding: 2px 5px; border-radius: 4px; font-weight: bold; color: #d64045; }
        .birthday-note { margin-top: 25px; padding-top: 15px; border-top: 2px dashed #ddd; color: #e67e22; font-weight: bold; font-size: 15px; }

        /* å‹•ç•« */
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        
        /* ç´™èŠ± */
        .confetti {
            position: fixed; width: 10px; height: 10px;
            background-color: #f00; animation: fall linear forwards; z-index: 999; pointer-events: none;
        }
        @keyframes fall { to { transform: translateY(100vh) rotate(720deg); } }
    </style>
</head>
<body>

    <audio id="bgm" loop>
    <source src="seasons.mp3" type="audio/mpeg"> 
    <source src="c:\Users\User\OneDrive\æ¡Œé¢\2025\seasons.mp3" type="audio/ogg"> </audio>

    <div class="gift-wrapper" id="gift-box" onclick="toggleGift()">
        <div class="box-lid">
            <div class="ribbon-vertical"></div>
        </div>
        <div class="box-body">
            <div class="ribbon-vertical"></div>
            <div class="ribbon-horizontal"></div>
        </div>
    </div>

    <div class="click-hint" id="hint-text">âœ¨ é»æ“Šæ‹†é–‹ç¦®ç‰© âœ¨</div>

    <div class="overlay-container" id="overlay" onclick="toggleGift()">
        <div class="card">
            <h1>Merry Christmas!</h1>
            <h2>Toï¼š EJ Wu</h2>
            
            <p>
                æ¯å¹´éƒ½é‚„æ˜¯æœƒé©šè¨ä¸€ä¸‹ï¼Œæˆ‘å€‘å¾åœ‹ä¸­èªè­˜åˆ°ç¾åœ¨å”·~<br>
            </p>
    
            <p>
                å³ä½¿æˆ‘å€‘å„è‡ªåœ¨ä¸åŒçš„é“è·¯ä¸Šå‰é€²ï¼Œå»ç¸½èƒ½åœ¨éœ€è¦çš„æ™‚å€™æ„Ÿå—åˆ°å½¼æ­¤çš„é—œå¿ƒï¼Œé€™ä»½é»˜å¥‘è®“äººå¾ˆå®‰å¿ƒï¼<br>
                é•·å¤§ä¹‹å¾Œæ‰æ…¢æ…¢æ˜ç™½ï¼Œå¾ˆå¤šäº‹æƒ…å…¶å¯¦ä¸æœƒé‚£éº¼é †åˆ©ï¼Œä¹Ÿæ‰ç™¼ç¾ä»¥å‰çš„æˆ‘çœŸçš„è »é›£ç›¸è™•çš„ :D<br>
                å¾ˆæ…¶å¹¸èº«é‚Šæœ‰ä½ å€‘çš„åŒ…å®¹ï¼Œè®“æˆ‘å¯ä»¥æˆå°±ç¾åœ¨çš„è‡ªå·±ã€‚<br>è©±èªªä»Šå¹´æˆ‘çœ‹åˆ°ä¸å°‘ç«æµæ˜Ÿï¼Œå¦³ä¹Ÿä¸€èµ·è¨±é¡˜å§ğŸ˜
            </p>
    
            <div style="text-align: center" class="birthday-note">
                è–èª•å¿«æ¨‚ğŸ„ä¹‹å¾Œä¹Ÿè«‹ç¹¼çºŒå¸¶æˆ‘è¿½æ˜Ÿã€å‡ºåœ‹ç©â˜ƒï¸<br>
                
            </div>

            <div style="text-align: center; margin-top: 20px; font-size: 12px; color: #ccc;">
                (é»æ“Šä»»æ„è™•æ”¶èµ·å¡ç‰‡)
            </div>
        </div>
    </div>

    <script>
        let isOpen = false;
        let hasMusicStarted = false;
        const bgm = document.getElementById('bgm');
        bgm.volume = 0.6; // éŸ³é‡ 60%

        function toggleGift() {
            const giftBox = document.getElementById('gift-box');
            const overlay = document.getElementById('overlay');
            const hint = document.getElementById('hint-text');

            // è™•ç†éŸ³æ¨‚ï¼šç¬¬ä¸€æ¬¡é»æ“Šæ™‚æ‰é–‹å§‹æ’­æ”¾ï¼Œä¹‹å¾Œå°±ä¸æœƒåœäº†
            if (!hasMusicStarted) {
                bgm.play().then(() => {
                    hasMusicStarted = true;
                }).catch(e => {
                    console.log("ç€è¦½å™¨é˜»æ“‹è‡ªå‹•æ’­æ”¾ï¼Œéœ€ç­‰å¾…äº’å‹•");
                });
            }

            if (!isOpen) {
                // --- åŸ·è¡Œæ‰“é–‹å‹•ä½œ ---
                giftBox.classList.add('open');
                hint.style.opacity = '0';
                
                // ç¨å¾®å»¶é²è®“å¡ç‰‡å½ˆå‡º
                setTimeout(() => {
                    overlay.classList.add('active');
                    popConfetti(); // åªæœ‰æ‰“é–‹æ™‚æ‰å™´ç´™èŠ±
                }, 400);
                
                isOpen = true;
            } else {
                // --- åŸ·è¡Œé—œé–‰å‹•ä½œ ---
                overlay.classList.remove('active');
                
                // ç­‰å¡ç‰‡æ¶ˆå¤±å¾Œï¼Œè“‹å­æ‰è“‹ä¸Š
                setTimeout(() => {
                    giftBox.classList.remove('open');
                    hint.style.opacity = '1';
                    // é€™è£¡ä¸æš«åœéŸ³æ¨‚ï¼Œè®“å®ƒç¹¼çºŒæ’­
                }, 300);
                
                isOpen = false;
            }
        }

        function popConfetti() {
            const colors = ['#d64045', '#f7b232', '#6ab04c', '#2d98da'];
            for(let i=0; i<50; i++) {
                const div = document.createElement('div');
                div.classList.add('confetti');
                div.style.left = Math.random() * 100 + 'vw';
                div.style.top = '-10px';
                div.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                div.style.animationDuration = (Math.random() * 2 + 1) + 's';
                document.body.appendChild(div);
            }
        }
    </script>
</body>
</html>